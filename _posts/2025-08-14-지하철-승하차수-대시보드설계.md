---
title: "[개인] 지하철 승하차수 예측 대시보드 - 대시보드 설계 "
excerpt: "예측값을 가져와 대시보드로 데이터 시각화해보기 "
date: 2025-08-14T12:00:00+09:00
last_modified_at: 2025-08-14T12:00:00+09:00
toc: true
toc_label: "목차"
toc_sticky: true
categories: [Prodject,Subway]
tags: [AWS, Tableau, LightGBM, XGBoost, Python, PostgreSQL, Automation, OpenAPI]
layout: single

---
## 개요
  - 산출한 예측값을 데이터 원본으로 Tableau에 연결하여 대시보드를 설계
  - 매일 최신 예측값을 볼 수 있으며, 과거 예측값을 실제값과 비교도 가능

---
## 1. 대시보드 임베딩
<!-- 수정된 코드: 큰 화면은 원래대로, 노트북만 가로휠 방지 -->
<style>
/* 큰 화면 (800px 이상) - 데스크톱/큰 모니터 (원래대로) */
@media (min-width: 800px) {
  #vizResponsive { 
    height: 1200px !important; 
  }
}

/* 중간 화면 (720px ~ 799px) - 노트북 (가로휠 방지) */
@media (min-width: 720px) and (max-width: 799px) {
  #vizResponsive { 
    height: 700px !important; 
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
  #vizResponsive .tableauViz {
    transform: scale(0.95) !important;
    transform-origin: top left !important;
  }
}

/* 작은 화면 (600px ~ 719px) - 태블릿 */
@media (min-width: 600px) and (max-width: 719px) {
  #vizResponsive { 
    height: 550px !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
  #vizResponsive .tableauViz {
    transform: scale(0.9) !important;
    transform-origin: top left !important;
  }
}

/* 모바일 (600px 미만) - 스마트폰 */
@media (max-width: 599px) {
  #vizResponsive { 
    height: 400px !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
  #vizResponsive .tableauViz {
    transform: scale(0.85) !important;
    transform-origin: top left !important;
  }
}
</style>

<!-- Tableau 대시보드 임베드 -->
<div class="tableauPlaceholder" id="vizResponsive"
     style="position: relative; width: 100%; height: 1200px; margin: 1em 0;">
  <noscript>
    <a href="#">
      <img alt="지하철 예측 승하차"
           src="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;_1&#47;_17548941338250&#47;sheet0&#47;1_rss.png"
           style="border: none; width: 100%; height: 100%; object-fit: contain;" />
    </a>
  </noscript>
  <object class="tableauViz"
          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
    <param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F" />
    <param name="embed_code_version" value="3" />
    <param name="site_root" value="" />
    <param name="name" value="_17548941338250&#47;sheet0" />
    <param name="tabs" value="no" />
    <param name="toolbar" value="yes" />
    <param name="static_image" value="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;_1&#47;_17548941338250&#47;sheet0&#47;1_rss.png" />
    <param name="animate_transition" value="yes" />
    <param name="display_static_image" value="yes" />
    <param name="display_spinner" value="yes" />
    <param name="display_overlay" value="yes" />
    <param name="display_count" value="yes" />
    <param name="language" value="ko-KR" />
  </object>
</div>

<script type="text/javascript">
  window.addEventListener('DOMContentLoaded', function () {
    var divElement = document.getElementById('vizResponsive');
    var vizElement = divElement.getElementsByTagName('object')[0];
    if (vizElement) {
      var scriptElement = document.createElement('script');
      scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
      vizElement.parentNode.insertBefore(scriptElement, vizElement);
    }
  });
</script>

- 데이터를 매일 갱신하여 대시보드도 매일 갱신될 수 있도록 설정하고자 했으나, 대시보드를 자동화 하려면 Tableau Online, Server가 필요하여 아직 실행시키지 못함

## 2. 대시보드 설명
예측값은 Xgboost, LightGBM 두 모델을 사용하여 비교할 수 있고, 개별적으로 구분되어 보여주기 위해서 매개변수로 설정해놓았고, 예측일 뿐 아니라 과거의 예측값과 실제값을 비교하여 모델링별로 실제값과의 차이를 보여줌 또한, 설명변수로 포함되어있는 공휴일정보와 날씨정보를 오른쪽에 따로 보여줘 해당 예측일날의 공휴일여부와 기온, 강수, 습도, 풍속등 정보를 볼 수 있도록 설계함

### 1. KPI
- 총 3개의 KPI로 구성
- 매개변수를 이용하여 **Xgoost, LightGBM, Ensemble** 이렇게 원하는 모델을 선택하여 값을 보여줄 수 있도록 설정
- 승차, 하차, 승하차수 차이 (승차-하차)를 표현
- 지도를 누를 경우 지도에 해당하는 역의 값으로 필터링

### 2. 지도
- 1~9호선, 우이신설만을 보여주고 있으며, 다중호선은 2개 이상의 환승역을 따로 표기
- 원하는 역을 클릭하면 해당 역의 값들도 필터링 되게 설정
- 마우스오버를 할 경우, **매개변수가 설정된 모델의 예측값**이 간략하게 보이도록 설정

### 3. 상위 top 10 승하차
- 예측일 기준 승차, 하차수가 많은 상위 10위 역들을 보여줌

### 4. 오차
- 예측일 기준 6일전 ~ 하루전까지의 예측값, 실제값의 비교를 보여줌
- 매개변수를 이용하여 승차, 하차를 선택
- 날짜 매개변수는 오차 시트의 KPI에 해당하는 부분에 관여하며, 해당 날짜의 실제값, LightGBM, Xgboost별로 실제값과의 차이를 보여줌
- 해당 시각화를 통해 **실제값과 예측값**들의 차이를 알 수 있음

### 5. 날짜 및 공휴일
- 예측일의 날짜, 공휴일 여부, 날짜 정보를 볼 수 있도록 설정
- 날짜가 **빨간색**이면 **공휴일**, **파란색**이면 **비공휴일**을 뜻함
- 기온, 강수, 습도, 풍속의 정보를 보여주고 있으며, 최근 5일동안의 추세도 같이 표현
- 각각 라인그래프 옆의 KPI는 예측일의 **평균 측정값**을 보여줌

### 6. 시간대별 측정값
- 시간대별로 기온, 강수, 습도, 풍속을 보여줌
- 범례에 따라 값이 클수록 주황, 작을수록 하늘색으로 설정

### 7. 도구 설명
- 빨간색 네모에 있는 지하철 모양의 이모티콘을 클릭하면 간략한 프로젝트 설명 표시
- 도구 설명 하단에 클릭하면 블로그와 깃허브로 갈 수 있는 이미지 삽입
<img src="/assets/images/subway_info.png" alt="지하철프로젝트 도구설명" width="500"/>  